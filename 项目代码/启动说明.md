# 复读适配性测试系统 - 启动说明

## 项目概述
这是一个复读适配性测试网站，包含访问统计功能。系统会自动记录每次访问 test.html 页面的数据。

## 功能特点
- 📊 **访问统计**: 自动记录每次页面访问
- 🗄️ **数据存储**: 使用 SQLite 数据库存储访问记录
- 📈 **统计管理**: 提供管理员页面查看访问统计
- 🔒 **密码保护**: 测试页面需要密码访问
- 📱 **响应式设计**: 支持手机和电脑访问

## 安装步骤

### 1. 安装 Node.js
请先确保您的电脑已安装 Node.js (版本 14 或更高)
- 下载地址: https://nodejs.org/

### 2. 安装项目依赖
在项目根目录打开终端，运行以下命令：

```bash
npm install
```

### 3. 启动服务器
运行以下命令启动服务器：

```bash
npm start
```

或者在开发模式下启动（支持热重载）：

```bash
npm run dev
```

### 4. 访问网站
服务器启动后，在浏览器中访问：
- 主页面: http://localhost:3000
- 管理页面: http://localhost:3000/admin.html

## 使用说明

### 访问测试页面
1. 打开 http://localhost:3000
2. 输入访问密码: **7834520**
3. 进入测试页面 (test.html)
4. 每次访问都会自动记录到数据库

### 查看访问统计
1. 打开 http://localhost:3000/admin.html
2. 查看实时的访问统计数据
3. 包含总访问次数、页面统计、访问记录等信息

## 数据库说明

### 数据表结构

#### visits 表 (详细访问记录)
- `id`: 自增主键
- `page_name`: 访问的页面名称
- `visit_time`: 访问时间
- `ip_address`: 访问者IP地址
- `user_agent`: 浏览器信息

#### visit_stats 表 (访问统计)
- `id`: 自增主键
- `page_name`: 页面名称
- `total_visits`: 总访问次数
- `last_updated`: 最后更新时间

### API 接口

#### 记录访问
- **POST** `/api/visit`
- 请求体: `{ "page_name": "test.html" }`
- 返回: 访问记录结果和总访问次数

#### 获取统计
- **GET** `/api/stats` - 获取所有页面统计
- **GET** `/api/stats/:page_name` - 获取指定页面统计
- **GET** `/api/visits/:page_name` - 获取指定页面访问记录

## 文件说明

### 核心文件
- `server.js` - Express 服务器和 API
- `package.json` - Node.js 项目配置
- `visits.db` - SQLite 数据库文件（自动生成）

### 前端页面
- `index.html` - 登录页面
- `test.html` - 测试问卷页面（含访问统计）
- `result.html` - 测试结果页面
- `admin.html` - 管理员统计页面

## 部署建议

### 生产环境部署
1. 设置环境变量 `PORT` 来指定端口
2. 使用 PM2 或类似工具管理进程
3. 配置反向代理（nginx）
4. 定期备份数据库文件

### 安全注意事项
- 修改默认访问密码
- 限制管理页面访问权限
- 定期备份数据库
- 监控服务器日志

## 故障排除

### 常见问题
1. **端口被占用**: 修改 PORT 环境变量或 server.js 中的端口号
2. **数据库错误**: 检查文件权限，确保可以创建 visits.db 文件
3. **访问记录失败**: 检查网络连接和服务器状态

### 调试模式
在浏览器开发者工具的控制台中可以看到：
- 访问记录成功/失败的消息
- 当前总访问次数
- 错误信息

## 技术支持
如有问题，请检查：
1. Node.js 版本是否正确
2. 依赖是否正确安装
3. 端口是否被其他程序占用
4. 数据库文件权限是否正确 